########################
#First Draft 2023-05-02#
#Edits & learning 05-14#
#Catppuccin       05-22#
#Light Mode       08-30#
#Weather          09-14#
#Modularizing: 1  09-21#
#Removing wifi :( 11-10#
#added mail test  12-04#
########################

PLUGIN_DIR="$HOME/.config/sketchybar/plugins"

### uncomment for eye-easy dark mode mauve catppuccin ###
COLOR_BAR=0xff24273a   # catppuccin-macchiato  base
COLOR_ICON=0xffc6a0f6  # catppuccin-macchiato  mauve
COLOR_FONT=0xff939ab7  # catppuccin-macchiato  overlay2

### uncomment for subtle mauvey light mode catppuccin ###
#COLOR_BAR=0xffeff1f5  # catppuccin-latte        base
#COLOR_ICON=0xff8839ef # catppuccin-latte        mauve
#COLOR_FONT=0xff7c7f93 # catpuccin-latte         overlay2

### font for labels "name: style: size"               ###
LABEL_FONT="FantasqueSansM Nerd Font Mono"
LABEL_STYLE="Regular"
LABEL_SIZE=18.5

### not far from the default bar settings             ###
bar=(
  height=30
  blur_radius=30
  position=top
  topmost=on
  sticky=off
  padding_left=4
  padding_right=4
  color=$COLOR_BAR
)

### spacing & fonts for items                         ###
defaults=(
  icon.font="SF Compact Display:Light:18.0"
  icon.color=$COLOR_ICON
  label.font.family="$LABEL_FONT"
  label.font.style="$LABEL_STYLE"
  label.font.size=$LABEL_SIZE
  label.color=$COLOR_FONT
  label.padding_left=2
  icon.padding_left=2
  label.padding_right=2
  icon.padding_right=2
)

### read the options above and pass them to sketchybar###
sketchybar --bar "${bar[@]}"
sketchybar --default "${defaults[@]}"

###   other bash scripts for minimal functionality    ###
            ### TODO clean this up also ###

sketchybar --add item clock center                             \
           --set clock   update_freq=10                        \
                         script="$PLUGIN_DIR/clock.sh"         \
                                                               \
           --add item wifi right                               \
           --set wifi script="$PLUGIN_DIR/wifi.sh"             \
                         icon=ô€·–                                \
           --subscribe wifi wifi_change                        \
                                                               \
           --add item volume right                             \
           --set volume  script="$PLUGIN_DIR/volume.sh"        \
           --subscribe volume volume_change                    \
                                                               \
           --add item battery right                            \
           --set battery script="$PLUGIN_DIR/battery.sh"       \
                         update_freq=120                       \
           --subscribe battery system_woke power_source_change \
                                                               \
           --add item mail center                              \
           --set mail update_freq=600                          \
                         script="$PLUGIN_DIR/mail.sh"          \
                                                               \
           --add item front_app left                           \
           --set front_app script="$PLUGIN_DIR/front_app.sh"   \
                         icon.drawing==off                     \
           --subscribe front_app front_app_switched            \
                                                               \
           --add item weather center                             \
           --set weather script="$PLUGIN_DIR/weather.sh"      \
                         update_freq=3600                      \


##### Finalizing Setup #####
# The below command is only needed at the end of the initial configuration to
# force all scripts to run the first time, it should never be run in an item script.

sketchybar --update
